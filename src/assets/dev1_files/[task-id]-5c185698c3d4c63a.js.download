(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6912],{17845:function(e,t,n){"use strict";n.d(t,{j:function(){return c}});var r=n(77191),i=n(67294),s=n(85893),c=function(e){(0,r.Z)(e);var t=(0,i.useState)("..."),n=t[0],c=t[1];return(0,i.useEffect)((function(){var e=setInterval((function(){c((function(e){return""===e?".":"."===e?"..":".."===e?"...":""}))}),500);return function(){return e&&clearInterval(e)}}),[]),(0,s.jsx)("span",{className:"whitespace-nowrap",children:n})}},36969:function(e,t,n){"use strict";n.d(t,{u:function(){return s}});var r=n(17845),i=n(85893),s=function(e){var t=e.text,n=e.percentage,s=e.isBoldOnHover,c=e.handleClick,o=e.testId;return(0,i.jsxs)("div",{className:"relative w-full rounded-xl text-black font-normal pointer-events-auto ".concat(s&&"hover:font-semibold"),onClick:function(e){e.stopPropagation(),c&&c()},"data-testid":"".concat(o),children:["continuous"===n?(0,i.jsxs)("div",{children:[t,(0,i.jsx)(r.j,{})]}):(0,i.jsx)("div",{className:"text-white bg-irBlue-200 py-1",children:t}),"continuous"!==n&&(0,i.jsx)("div",{className:"absolute inset-0 text-black py-1 bg-white",style:{clipPath:"inset(0 0 0 ".concat(n,"%)")},"data-testid":"".concat(o,"-text"),children:t})]})}},275:function(e,t,n){"use strict";n.d(t,{A:function(){return i}});var r=n(67294),i=function(e){var t=(0,r.useRef)(!1),n=function(){t.current=!0},i=function(n){t.current&&e.current&&(e.current.scrollLeft-=n.movementX)},s=function(){t.current=!1},c=function(){t.current=!1};(0,r.useEffect)((function(){var t;if(e.current)return(t=e.current).addEventListener("mousedown",n),t.addEventListener("mousemove",i),t.addEventListener("mouseup",s),t.addEventListener("mouseleave",c),function(){e.current&&(e.current.removeEventListener("mousedown",n),e.current.removeEventListener("mousemove",i),e.current.removeEventListener("mouseup",s),e.current.removeEventListener("mouseleave",c))}}),[e])}},31458:function(e,t,n){"use strict";n.d(t,{U:function(){return o}});var r=n(50029),i=n(87794),s=n.n(i),c=n(98948),o=function(){var e=(0,r.Z)(s().mark((function e(t){var n,r,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,r=null,e.prev=2,e.next=5,c.Z.get(t);case 5:n=e.sent.data,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),i=e.t0,r={message:i.message,code:i.code};case 12:return e.abrupt("return",{result:n,error:r});case 13:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},21399:function(e,t,n){"use strict";n.d(t,{X3:function(){return i},eE:function(){return c},gn:function(){return s},mc:function(){return l},pB:function(){return o}});var r=n(93958).v.actions,i=r.setTask,s=r.setIsImporting,c=r.setProgress,o=r.setImportComplete,l=r.reset},43061:function(e,t,n){"use strict";n.d(t,{p:function(){return r}});var r=function(e){return e.resizeBackgroundImport}},16856:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return ae},default:function(){return ue}});var r=n(76687),i=n(96517),s=n(61721),c=n(60525),o=n(67294),l=n(60071),a=n(10187),u=n(38813),d=n(10343),f=n(14124),p=n(10131),x=n(23734),v=n(85893),h=function(){var e=(0,x.S)(),t=e.handleExport,n=e.isExporting,r=e.imageLoaded,i=e.dimensionsValid,s=e.isDisabled;return(0,v.jsx)(f.e,{text:"Maximum allowed value for width / height reached.",inactive:i,containerClassNames:"block w-full",children:(0,v.jsx)("div",{className:"py-2 px-1",children:(0,v.jsxs)("div",{className:"".concat(!r||n?"cursor-progress":"cursor-pointer"," ").concat(s?"bg-irGray-600":"bg-irBlue-200 hover:bg-irBlue-400"," text-white text-center flex justify-center items-center gap-2 capitalize font-semibold w-full py-4 rounded-xl text-2xl"),onClick:function(e){e.stopPropagation(),t()},"data-testid":"resize-image-button",children:[(0,v.jsx)("div",{className:"",children:(0,v.jsx)(p.vN,{keyName:"resize-image"})}),n?(0,v.jsx)(u.a,{stroke:"white",height:24,width:24}):(0,v.jsx)(d.m,{width:24,height:24})]})})})},m=function(e){var t=e.handleClick,n=e.icon,r=e.title,i=e.isActive,s=e.type;return(0,v.jsxs)("div",{"data-testid":"desktop-set-edit-type-".concat(s),className:"cursor-pointer flex items-center gap-2 py-2 px-4 rounded-md ".concat(i&&"bg-slate-200"," hover:bg-slate-200 whitespace-nowrap focus:outline focus:outline-irBlue-400"),onClick:function(e){e.stopPropagation(),t()},tabIndex:0,onKeyDown:function(e){"Enter"===e.key&&t()},children:[(0,v.jsx)("div",{children:n}),(0,v.jsx)("div",{children:r})]})},j=n(41112),g=n(275),w=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,a.TL)(),n=(0,a.CG)(j.F,y),r=n.currentType,i=(0,o.useRef)(null);(0,g.A)(i);var s=function(){i.current&&i.current.scrollTo({behavior:"smooth",left:i.current.getBoundingClientRect().width})},c=function(){i.current&&i.current.scrollTo({behavior:"smooth",left:0})},u=function(n){t((0,l.Xc)(n)),"resize"===n||"crop"===n?c():s(),e&&t((0,l.OS)())};return{currentType:r,handleClick:u,swipeableRef:i}},y=function(e,t){return e.currentType===t.currentType},k=n(77191),b=function(e){return(0,k.Z)(e),(0,v.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,v.jsx)("path",{d:"M20 16.0444C20 16.4 19.7111 16.6667 19.3778 16.6667H16.6667H15.4222H6.46667C4.73333 16.6667 3.33333 15.2667 3.33333 13.5333V4.57778H0.622222C0.266667 4.57778 0 4.28889 0 3.95556C0 3.62222 0.288889 3.33333 0.622222 3.33333H3.33333V0.622222C3.33333 0.288889 3.62222 0 3.95556 0C4.28889 0 4.57778 0.288889 4.57778 0.622222V3.33333V4.57778V13.5333C4.57778 14.5556 5.42222 15.4 6.44444 15.4H15.4V6.46667C15.4 5.42222 14.5556 4.6 13.5333 4.6H5.82222V3.33333H13.5333C15.2667 3.33333 16.6667 4.73333 16.6667 6.46667V15.4222H19.3778C19.7111 15.4222 20 15.6889 20 16.0444ZM15.4222 19.3778C15.4222 19.7333 15.7111 20 16.0444 20C16.3778 20 16.6667 19.7111 16.6667 19.3778V17.9111H15.4222V19.3778Z",fill:"#1A1A1A"})})},N=n(73239),C=n(1332),z=n(82566),E=n(4713),V=function(){var e=w(),t=e.currentType,n=e.handleClick,r=e.swipeableRef;return(0,v.jsx)("div",{className:"relative overflow-x-auto border-b border-b-irGray-200 scroll select-none",ref:r,children:(0,v.jsxs)("div",{className:"flex items-center w-full py-2 px-1 gap-1","data-testid":"desktop-edit-types-container",children:[(0,v.jsx)(m,{title:(0,E.k)((0,z.V)("resize")),type:"resize",icon:(0,v.jsx)(N.$,{}),isActive:"resize"===t,handleClick:function(){return n("resize")}}),(0,v.jsx)(m,{title:(0,E.k)((0,z.V)("crop")),type:"crop",icon:(0,v.jsx)(b,{}),isActive:"crop"===t,handleClick:function(){return n("crop")}}),(0,v.jsx)(m,{title:(0,E.k)("".concat((0,z.V)("flip")," & ").concat((0,z.V)("rotate"))),type:"flip",icon:(0,v.jsx)(C.g,{}),isActive:"flip"===t,handleClick:function(){return n("flip")}})]})})},T=n(86784),_=n(1129),B=n(19920),L=n(86076),R=n(38060),H=function(e,t){return e.currentType===t.currentType},I=function(){var e=function(){var e=(0,a.CG)(j.F,H).currentType;return{currentType:e,title:{resize:"".concat((0,z.V)("resize")," ").concat((0,z.V)("settings")),crop:(0,z.V)("crop-rectangle"),rotate:"",flip:""}[e]}}(),t=e.title,n=e.currentType;return(0,v.jsxs)("div",{className:"w-full flex flex-col h-full",children:[(0,v.jsx)("div",{className:"",children:(0,v.jsx)(V,{})}),(0,v.jsx)("div",{className:"flex-grow w-full overflow-y-auto scroll",children:(0,v.jsxs)("div",{className:"w-full max-h-full pt-6 scroll select-none flex flex-col h-full",children:[(0,v.jsx)("div",{className:"px-6 flex-grow-0 flex-shrink-0",children:(0,v.jsx)(R.D,{title:t})}),(0,v.jsxs)("div",{className:"h-full max-h-full overflow-y-hidden",children:["resize"===n&&(0,v.jsx)(B._,{}),"crop"===n&&(0,v.jsx)(T.u,{}),("flip"===n||"rotate"===n)&&(0,v.jsxs)("div",{className:"flex flex-col px-6 max-h-full h-full overflow-y-scroll",children:[(0,v.jsx)(_.d,{}),(0,v.jsx)(L.h,{})]})]})]})}),"resize"===n&&(0,v.jsx)("div",{className:"bg-white border-t border-t-irGray-200 z-10",children:(0,v.jsx)(h,{})})]})},P=n(88680),Z=function(e){var t=e.handleClick,n=e.icon,r=e.title,i=e.type;return(0,v.jsxs)("div",{"data-testid":"mobile-set-edit-type-".concat(i),className:"cursor-pointer flex flex-col items-center gap-1 rounded-md",onClick:t,children:[(0,v.jsx)("div",{children:n}),(0,v.jsx)("div",{children:r})]})},A=function(){var e=w(!0).handleClick;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"lg:hidden grid grid-cols-3 py-4 border-t-irGray-200 border-t w-full bg-white text-sm",children:[(0,v.jsx)(Z,{title:(0,E.k)((0,z.V)("resize")),type:"resize",icon:(0,v.jsx)(N.$,{}),handleClick:function(){return e("resize")}}),(0,v.jsx)(Z,{title:(0,E.k)((0,z.V)("crop")),type:"crop",icon:(0,v.jsx)(b,{}),handleClick:function(){return e("crop")}}),(0,v.jsx)(Z,{title:(0,E.k)("".concat((0,z.V)("flip")," & ").concat((0,z.V)("rotate"))),type:"rotate",icon:(0,v.jsx)(C.g,{}),handleClick:function(){return e("rotate")}})]}),(0,v.jsx)(P.u,{})]})},G=n(36969),S=n(32994),F=n(11163),X=n(30085),O=function(){var e=(0,X.u)(),t=e.canvasRef,n=e.resizeRef,r=e.cropRef,i=e.rotateRef,s=e.currentType,c=e.previewContainerRef,o=e.initialCanvasRef,l=e.showLoader,a=e.size,u=e.loadedProgress,d=e.isUnsupportedImage;return(0,v.jsxs)("div",{className:"px-4 h-full overflow-hidden",children:[(0,v.jsxs)("div",{className:"flex-col bg-white flex items-stretch h-2/3 lg:h-full",ref:c,children:[l&&(0,v.jsx)("div",{className:"w-full h-full flex items-start lg:items-center justify-center",children:(0,v.jsx)("div",{className:"relative flex flex-col items-center gap-8 text-lg font-semibold",children:a?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(p.vN,{keyName:"loading-your-image-with-percentage",variables:{progress:u,size:a}}),(0,v.jsx)("div",{className:"absolute top-full left-0 right-0 h-2 mt-2 outline outline-irBlue-200",children:(0,v.jsx)(G.u,{text:"",percentage:u})})]}):(0,v.jsx)(p.vN,{keyName:"loading-your-image"})})}),(0,v.jsxs)("div",{className:"mx-auto lg:my-auto",children:[(0,v.jsx)("canvas",{ref:t,className:"hidden"}),(0,v.jsx)("canvas",{ref:o,className:"hidden"}),"resize"===s&&(0,v.jsx)("canvas",{ref:n,"data-testid":"resize-preview"}),"crop"===s&&(0,v.jsx)("canvas",{ref:r}),("flip"===s||"rotate"===s)&&(0,v.jsx)("canvas",{ref:i})]})]}),d&&(0,v.jsx)(D,{})]})},D=function(){var e=(0,F.useRouter)();return(0,v.jsx)(S.u,{isOpen:!0,children:(0,v.jsx)("div",{className:"h-full flex items-center justify-center text-black",children:(0,v.jsxs)("div",{className:"p-4 bg-white rounded-lg text-center inline-flex flex-col items-center justify-center gap-4",children:[(0,v.jsx)("div",{className:"text-xl font-semibold",children:(0,v.jsx)(p.vN,{keyName:"unsupported-mime-type-title"})}),(0,v.jsx)("div",{children:(0,v.jsx)(p.vN,{keyName:"unsupported-mime-type-description"})}),(0,v.jsx)("div",{className:"py-2 px-4 rounded-lg text-white bg-irBlue-200 hover:bg-irBlue-400 ml-auto cursor-pointer capitalize",onClick:function(){e.push("/")},children:(0,v.jsx)(p.vN,{keyName:"return-to-upload-page"})})]})})})},M=n(50029),U=n(87794),$=n.n(U),K=n(58837),Q=n(24713),q=n(26758),J=n(56726),W=n(6006),Y=function(){var e=(0,M.Z)($().mark((function e(t,n){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){W.Z.get(t,{responseType:"blob"}).then((function(t){var r=t.data,i=new File([r],n,{type:r.type});e({file:i})})).catch((function(t){e({file:null})}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ee=n(21399),te=n(43061),ne=function(){var e=(0,o.useContext)(K.Q).task,t=(0,a.CG)(j.F,re).image,n=(0,a.CG)(te.p),r=n.isImporting,i=n.importComplete,s=(0,a.TL)(),c=(0,F.useRouter)().locale;var l=(0,Q.U)({onComplete:function(e){i||(s((0,ee.X3)(e)),s((0,ee.pB)(!0)))},onProgress:function(e,t){i||s((0,ee.eE)(t))},onFailure:function(){},onStart:function(){},shouldCancelOnUnmount:!1}),u=l.handleDeviceImport,d=function(){var e=(0,M.Z)($().mark((function e(t,n){var r,i;return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s((0,ee.gn)(!0)),e.next=3,(0,q.h)();case 3:return e.next=5,Y(n.src,n.title);case 5:if(r=e.sent,i=r.file){e.next=10;break}return window.location.href=c?"en"===c?"/":"/".concat(c):"/",e.abrupt("return");case 10:u({file:i,src:n.src,size:(0,J.t)(i.size)},t,{});case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){t&&!r&&(t.src?!e||"completed"===e.status||r||i?(s((0,ee.pB)(!0)),e&&s((0,ee.X3)(e))):d(e,t):window.location.href=c?"en"===c?"/":"/".concat(c):"/")}),[null===e||void 0===e?void 0:e.status,t])},re=function(e,t){var n,r,i,s;return(null===(n=e.image)||void 0===n?void 0:n.src)===(null===(r=t.image)||void 0===r?void 0:r.src)&&(null===(i=e.image)||void 0===i?void 0:i.title)===(null===(s=t.image)||void 0===s?void 0:s.title)},ie=function(){var e=(0,a.TL)();ne();return(0,o.useEffect)((function(){return(0,i.S)("event","Editor Loaded",{event_category:"Image Resizer",event_label:"Editor Page"}),function(){e((0,l.Sl)())}}),[]),(0,v.jsx)(s.H,{action:{desktop:null},navbar:(0,v.jsx)(c.$,{actionButton:null}),leftBar:(0,v.jsx)(I,{}),controlBar:null,preview:(0,v.jsx)(O,{}),bottomMenu:(0,v.jsx)(A,{})})},se=n(73400),ce=n(87414),oe=n(95155),le=["single-resizer-editor"].concat((0,r.Z)(oe.y)),ae=!0,ue=function(e){var t=e.task;return(0,v.jsx)(ce.i,{files:le,children:(0,v.jsx)(K.o,{task:t,children:(0,v.jsx)(se.K,{children:(0,v.jsx)(ie,{})})})})}},47176:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/resize/editor/[task-id]",function(){return n(16856)}])}},function(e){e.O(0,[1664,9643,3979,7621,8486,883,3129,4839,8948,4606,4635,4533,7557,6290,9774,2888,179],(function(){return t=47176,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=[task-id]-5c185698c3d4c63a.js.map