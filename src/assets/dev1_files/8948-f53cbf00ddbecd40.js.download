"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8948],{14124:function(t,e,n){n.d(e,{e:function(){return u}});var r=n(67294),i=n(8881),o=n(33284),a=n(99158),c="black",s=n(85893),u=function(t){var e=t.children,n=t.text,u=t.position,l=t.containerClassNames,d=t.inactive,f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{y:"up"},n=arguments.length>2?arguments[2]:void 0,s=(0,r.useRef)(null),u=(0,r.useMemo)((function(){return String.fromCharCode(65+Math.floor(26*Math.random())+Date.now())}),[]),l="".concat(u,"_arrow"),d=(0,o.O)(),f=d.isOpen,p=d.open,h=d.close;(0,i.t)(s,f,h);var v=(0,a.i)().width;(0,r.useEffect)((function(){if(s.current){var t=k(),e=x();return f?(y(t,s.current),b(e,s.current)):(m(t),g(e)),function(){m(k()),g(x())}}}),[f,t]);var k=function(){var t=document.getElementById(u);if(t)return t;var e=document.createElement("div");return e.style.zIndex="9999",e.id=u,n&&e.setAttribute("data-testid",n),document.body.appendChild(e),e},m=function(t){t.remove()},y=function(e,n){e.style.display="inline-block",e.style.position="fixed";var r=document.createElement("div");r.innerHTML="".concat(t),r.style.color="white",r.style.minWidth="100px",r.style.textAlign="center",e.appendChild(r),e.style.wordBreak="break-all",e.style.backgroundColor=c,e.style.padding="1rem",e.style.borderRadius="5px";var i=C(e,n),o=i.left,a=i.top;e.style.left="".concat(o,"px"),e.style.top="".concat(a,"px")},b=function(t,e){t.style.backgroundColor=c,t.style.width="16px",t.style.height="16px",t.style.display="inline-block",t.style.zIndex="9999",t.style.position="fixed",t.style.transform="rotate(45deg)",document.body.appendChild(t);var n=w(t,e),r=n.left,i=n.top;return t.style.left="".concat(r,"px"),t.style.top="".concat(i,"px"),t},w=function(t,n){var r,i,o=n.getBoundingClientRect(),a=o.left,c=o.top;return c-=t.getBoundingClientRect().height,a+=(null!==(r=null===(i=s.current)||void 0===i?void 0:i.getBoundingClientRect().width)&&void 0!==r?r:0)/2-8,"down"===e.y&&(c=n.getBoundingClientRect().y+n.getBoundingClientRect().height+5),{left:a,top:c}},g=function(t){t.remove()},x=function(){var t=document.getElementById(l);if(t)return t;var e=document.createElement("div");return e.id=l,e},C=function(t,n){var r,i,o=n.getBoundingClientRect(),a=o.left,c=o.top,u=t.getBoundingClientRect().width;return c-=10+t.getBoundingClientRect().height,a-=u/2,a+=(null!==(r=null===(i=s.current)||void 0===i?void 0:i.getBoundingClientRect().width)&&void 0!==r?r:0)/2,window.innerWidth<u+a&&(a-=Math.abs(window.innerWidth-(a+u))),a<0&&(a=0),"down"===e.y&&(c=n.getBoundingClientRect().y+n.getBoundingClientRect().height+10),{left:a,top:c}};return{width:v,show:p,hide:h,parentRef:s}}(n,u,t.testId),p=f.show,h=f.hide,v=f.parentRef;return d?(0,s.jsx)(s.Fragment,{children:e}):(0,s.jsx)("div",{className:"cursor-pointer inline-block select-none ".concat(l),onMouseEnter:p,onMouseLeave:h,onClick:p,ref:v,children:e})}},8165:function(t,e,n){n.d(e,{M:function(){return d}});var r=n(50029),i=n(92777),o=n(82262),a=n(59499),c=n(87794),s=n.n(c),u=n(31458),l=n(60560),d=function(){function t(e,n){var o=this;(0,i.Z)(this,t),(0,a.Z)(this,"task",void 0),(0,a.Z)(this,"options",void 0),(0,a.Z)(this,"isComplete",!1),(0,a.Z)(this,"handleTaskComplete",function(){var t=(0,r.Z)(s().mark((function t(e){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o.isComplete){t.next=2;break}return t.abrupt("return");case 2:o.isComplete=!0,o.options.handleTaskComplete(e);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),(0,a.Z)(this,"handleTaskFail",(function(t){o.options.handleTaskFail(t)})),this.task=e,this.options=n}return(0,o.Z)(t,[{key:"appendTask",value:function(){var t=(0,r.Z)(s().mark((function t(){var e,n=arguments;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=!(n.length>0&&void 0!==n[0])||n[0],t.next=3,this.initSocket();case 3:e&&this.checkStatus();case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"initSocket",value:function(){var t=(0,r.Z)(s().mark((function t(){var e,n=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new l.u,t.next=3,e.appendTask(this.task,{handleDisconnect:this.options.handleDisconnect,handleReconnect:this.options.handleReconnect,handleTaskComplete:function(t){n.handleTaskComplete(t)},handleTaskFail:this.handleTaskFail,onOfflineLimitReach:this.options.onOfflineLimitReach});case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"checkStatus",value:function(){var t=(0,r.Z)(s().mark((function t(){var e,n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isComplete){t.next=2;break}return t.abrupt("return",!0);case 2:return t.next=4,(0,u.U)("/api/tasks/".concat(this.task.id));case 4:if(e=t.sent,n=e.result,!e.error&&n){t.next=10;break}return this.handleTaskFail(this.task),t.abrupt("return",!1);case 10:if("completed"!==n.status){t.next=13;break}return this.options.handleTaskComplete(n),t.abrupt("return",!0);case 13:return"failed"===n.status&&this.options,t.abrupt("return",!1);case 15:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}()},60560:function(t,e,n){n.d(e,{u:function(){return m}});var r=n(50029),i=n(92777),o=n(82262),a=n(59499),c=n(87794),s=n.n(c),u=n(26758),l=n(31458);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){(0,a.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var p=null,h=null,v=[],k=null,m=function(){function t(){var e=this;(0,i.Z)(this,t),(0,a.Z)(this,"handleTaskComplete",(function(t){var e=v.find((function(e){return t.id===e.task.id}));e&&(e.options.handleTaskComplete(t),v=v.filter((function(e){return e.task.id!==t.id})))})),(0,a.Z)(this,"handleTaskFailed",(function(t){v.forEach((function(e){e.task.id===t.id&&e.options.handleTaskFail(t)}))})),(0,a.Z)(this,"handleReconnect",(0,r.Z)(s().mark((function t(){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getSocket();case 2:return(n=t.sent).on("disconnect",e.handleDisconnect),n.on("reconnect",e.handleReconnect),v.forEach((function(t){t.options.handleReconnect&&t.options.handleReconnect(),e.subscribe(t.task,n)})),e.removeOfflineLimitWatcher(),t.next=9,Promise.all(v.map((function(t){return y(t)})));case 9:t.sent.forEach((function(t){return t.isCompleted&&t.task.options.handleTaskComplete(t.task.task)}));case 11:case"end":return t.stop()}}),t)})))),(0,a.Z)(this,"handleDisconnect",(function(){p=new Date,e.setOfflineLimitWatcher(),v.forEach((function(t){return t.options.handleDisconnect&&t.options.handleDisconnect()}))})),this.setOfflineLimitWatcher(),this.addInternetEventListeners()}return(0,o.Z)(t,[{key:"appendTask",value:function(){var t=(0,r.Z)(s().mark((function t(e,n){var r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getSocket();case 2:r=t.sent,v.push({task:e,options:n}),this.subscribe(e,r),this.addCypressEventListener(e,n);case 6:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getSocket",value:function(){var t=(0,r.Z)(s().mark((function t(){var e,n,r,i=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!k){t.next=2;break}return t.abrupt("return",k);case 2:return t.next=4,(0,u.h)();case 4:return k=t.sent,null===(e=k)||void 0===e||e.on("task_failed",(function(t){i.handleTaskFailed(t)})),null===(n=k)||void 0===n||n.on("task_started",(function(t){})),null===(r=k)||void 0===r||r.on("task_completed",(function(t){i.handleTaskComplete(t)})),k.on("disconnect",this.handleDisconnect),k.on("reconnect",this.handleReconnect),t.abrupt("return",k);case 11:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"subscribe",value:function(t,e){e.emit("subscribe","task.".concat(t.id))}},{key:"addInternetEventListeners",value:function(){window.addEventListener("online",this.handleReconnect),window.addEventListener("offline",this.handleDisconnect)}},{key:"addCypressEventListener",value:function(t,e){window.Cypress&&document.body.addEventListener("task_failed.".concat(t.id),(function(t){e.handleTaskFail(t.task)}))}},{key:"setOfflineLimitWatcher",value:function(){var t=this;h||(h=setInterval((function(){p&&(new Date).getTime()-p.getTime()>=6e5&&(t.removeOfflineLimitWatcher(),v.forEach((function(t){return t.options.onOfflineLimitReach&&t.options.onOfflineLimitReach(t.task)})))}),1e3))}},{key:"removeOfflineLimitWatcher",value:function(){h&&clearInterval(h)}}]),t}(),y=function(){var t=(0,r.Z)(s().mark((function t(e){var n,r,i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,l.U)("/api/tasks/".concat(e.task.id));case 2:if(n=t.sent,r=n.error,i=n.result,!r&&i&&"completed"===i.status){t.next=7;break}return t.abrupt("return",{task:e,isCompleted:!1});case 7:return t.abrupt("return",{task:f(f({},e),{},{task:i}),isCompleted:!0});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},26758:function(t,e,n){n.d(e,{h:function(){return v}});var r,i=n(50029),o=n(87794),a=n.n(o),c=n(6006),s=n(69643),u=null,l=[],d=!1,f={LIVE:"https://notification.freeconvert.com/",SANDBOX:"https://dev-notification.freeconvert.com/",PREPROD:"https://preprod-notification.freeconvert.com/"},p={LIVE:"https://api.freeconvert.com/v1/account/guest",SANDBOX:"https://dev-api.freeconvert.com/v1/account/guest",PREPROD:"https://preprod-api.freeconvert.com/v1/account/guest"},h=null!==(r="LIVE")?r:"",v=function(){var t=(0,i.Z)(a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!u){t.next=2;break}return t.abrupt("return",u);case 2:if(!d){t.next=4;break}return t.abrupt("return",new Promise((function(t){l.push(t)})));case 4:return t.next=6,m();case 6:return e=t.sent,u=(0,s.io)(f[h],{transports:["websocket"],auth:{token:"Bearer ".concat(e)}}),l.forEach((function(t){return u&&t(u)})),l=[],d=!1,t.abrupt("return",u);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),k="";function m(){return y.apply(this,arguments)}function y(){return(y=(0,i.Z)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!k){t.next=2;break}return t.abrupt("return",k);case 2:return t.next=4,c.Z.get(p[h]);case 4:return k=t.sent.data,t.abrupt("return",k);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=8948-f53cbf00ddbecd40.js.map